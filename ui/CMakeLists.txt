cmake_minimum_required(VERSION 2.6)
project(CalX)

set(wxWidgets_USE_LIBS)
if (WIN32)
	if (CMAKE_BUILD_TYPE EQUAL DEBUG)
		set(wxWidgets_CONFIGURATION  mswud)
	else (CMAKE_BUILD_TYPE EQUAL DEBUG)
		set(wxWidgets_CONFIGURATION  mswu)
	endif (CMAKE_BUILD_TYPE EQUAL DEBUG)
	find_package(wxWidgets COMPONENTS mono)
else (WIN32)
	set(wxWidgets_USE_UNICODE ON)
	if (CMAKE_BUILD_TYPE EQUAL DEBUG)
		set(wxWidgets_USE_DEBUG ON)
	else (CMAKE_BUILD_TYPE EQUAL DEBUG)
		set(wxWidgets_USE_DEBUG OFF)
	endif (CMAKE_BUILD_TYPE EQUAL DEBUG)
	find_package(wxWidgets)
endif (WIN32)

if (wxWidgets_FOUND)
	include(${wxWidgets_USE_FILE})
	include_directories(${CMAKE_SOURCE_DIR})
	include_directories(${CMAKE_CURRENT_SOURCE_DIR})
	file(GLOB_RECURSE SRCS *.cpp ${CMAKE_SOURCE_DIR}/cli/CLI.cpp ${CMAKE_SOURCE_DIR}/cli/DevCLI.cpp)
	add_executable(calxui ${SRCS})
	if(WIN32)
		set_target_properties(calxui PROPERTIES LINK_FLAGS "/SUBSYSTEM:WINDOWS")
	endif(WIN32)
	target_link_libraries(calxui ${wxWidgets_LIBRARIES} calx)
	install(TARGETS calxui DESTINATION bin)
else(wxWidgets_FOUND)
	message("wxWidgets not found!")
endif(wxWidgets_FOUND)

