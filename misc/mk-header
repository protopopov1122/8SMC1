# Build target
TARGET=debug
PLATFORM=win
OUTPUT=calx
UI=calxui
BUILD=./build
WXLIB=
EXTRA=

# Linux build specific
OUTPUT.EXE_linux=$(OUTPUT)
OUTPUT.LIB_linux=lib$(OUTPUT).so
OUTPUT_UI_linux=$(UI)
CC_linux=g++
LANG_linux=-std=c++11 -Wall -Wextra -pedantic -Wno-unused-parameter
DBG_linux_debug=-O0 -DLOGGING
DBG_linux_release=-O2
DBG_linux=$(DBG_linux_$(TARGET))
INCLUDES_linux=-I.
LIBCFLAGS_linux=-fPIC
LIBLDFLAGS_linux=
CFLAGS_linux=$(LANG_linux) $(DBG_linux) $(INCLUDES_linux) $(EXTRA)
LDFLAGS_linux=-lpthread

# Windows build specific
OUTPUT.EXE_win=$(OUTPUT).exe
OUTPUT.LIB_win=$(OUTPUT).dll
OUTPUT_UI_win=$(UI).exe
CC_win=i686-w64-mingw32-g++
LANG_win=-std=c++11 -Wall -Wextra -pedantic -Wno-unused-parameter -Wno-attributes
DBG_win_debug=-O0 -DLOGGING
DBG_win_release=-O2
DBG_win=$(DBG_win_$(TARGET))
LIBCFLAGS_win=
LIB_LDFLAGS_win=
CFLAGS_win=$(LANG_win) $(DBG_win) $(INCLUDES_win) $(EXTRA)
LDFLAGS_win=-static-libgcc -static-libstdc++ -Wl,-Bstatic -lstdc++ -lpthread -Wl,-Bdynamic
# Windows tools
CONVERT := $(shell command -v convert 2> /dev/null)
ifdef CONVERT
ifdef WINDRES
ICON=calxui.res
endif
endif

#Build flags
OUTPUT.EXE=$(OUTPUT.EXE_$(PLATFORM))
OUTPUT.LIB=$(OUTPUT.LIB_$(PLATFORM))
OUTPUT_UI=$(OUTPUT_UI_$(PLATFORM))
CC=$(CC_$(PLATFORM))
LIBCFLAGS=$(LIBCFLAGS_$(PLATFORM))
LIBLDFLAGS=$(LIBLDFLAGS_$(PLATFORM))
LDFLAGS=$(LDFLAGS_$(PLATFORM))
CFLAGS=$(CFLAGS_$(PLATFORM))


